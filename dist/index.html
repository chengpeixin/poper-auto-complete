<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="/dist/index.cdc6058d.css" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no"
    />
    <title>Document</title></head
  ><style>
    html,
    body {
      width: 100vw;
      height: 100vh;
      box-sizing: border-box;
      -webkit-overflow-scrolling: touch;
      transform: translateZ(0);
    }
    body {
      overflow-y: overlay;
    }
    .scroll {
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      display: grid;
    }
    .result-item-fullbox {
      box-sizing: border-box;
      padding: 2px;
      transition: all 0.3s;
    }
    .result-item {
      width: 98%;
      height: 130px;
      max-width: 400px;
      box-sizing: border-box;
      border-radius: 5px;
      flex: 1;
      margin: 0 auto;
      padding: 16px;
      display: flex;
      position: relative;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
    }
    .result-item-img {
      height: 90px;
      width: 90px;
    }
    .result-item-img img {
      width: 90px;
      height: 90px;
      opacity: 0;
      border-radius: 5px;
      transition: opacity 1s;
    }
    .result-item-content {
      width: 70%;
      color: #333;
    }
    .result-item-content-title {
      font-size: 16px;
      font-weight: 700;
    }
    .result-item-content-text {
      text-overflow: ellipsis;
      box-sizing: border-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      padding-right: 8px;
      font-size: 14px;
      display: -webkit-box;
      overflow: hidden;
    }
    .result-item-date {
      color: #999;
      font-size: 14px;
      position: absolute;
      bottom: 16px;
    }
    .next-page {
      width: 100%;
      height: 50px;
      cursor: pointer;
      color: #93969a;
      background: #fff;
      justify-content: center;
      align-items: center;
      display: flex;
    }
    .next-page-text {
      display: none;
    }
    .spinner {
      width: 40px;
      height: 40px;
      animation: rotate 2s linear infinite;
      display: block;
    }
    .spinner .path {
      stroke: #93bfec;
      stroke-linecap: round;
      animation: dash 1.5s ease-in-out infinite;
    }
    @keyframes rotate {
      to {
        transform: rotate(360deg);
      }
    }
    @keyframes dash {
      0% {
        stroke-dasharray: 1 150;
        stroke-dashoffset: 0;
      }
      50% {
        stroke-dasharray: 90 150;
        stroke-dashoffset: -35px;
      }
      to {
        stroke-dasharray: 90 150;
        stroke-dashoffset: -124px;
      }
    }
    .skeleton {
      background-image: linear-gradient(
        90deg,
        #efecee 25%,
        #fff 37%,
        #efecee 63%
      );
      background-position: 100%;
      background-size: 400% 100%;
      animation: skeleton-loading 1.4s infinite;
    }
    @keyframes skeleton-loading {
      0% {
        background-position: 100%;
      }
      to {
        background-position: 0;
      }
    }
  </style>
  <body>
    <div id="xxx"></div>
    <div class="scroll"></div>
    <div class="next-page">
      <span class="next-page-text">下一页</span>
      <svg class="spinner" viewBox="0 0 50 50">
        <circle class="path" cx="25" cy="25" r="20" fill="none" />
      </svg>
    </div>
  </body>
</html>
<script type="module" src="/dist/index.a86a24e6.js"></script>
<script src="/dist/index.8173a6a5.js" nomodule="" defer></script>
<script>
  for (var testData = [], i = 0; i < 1e5; i++)
    testData.push({ label: "".concat(i, "hcdfj"), value: String(i) });
  window.addEventListener("load", function () {
    var t = new AutoComplete(document.querySelector("#xxx"), {
        options: testData,
        width: "100%",
        height: 50,
      }),
      e = { current: 0, pageSize: 10, total: 0 };
    t.on("change", function (t) {
      (document.querySelector(".scroll").innerHTML = ""),
        r(),
        a(),
        u(),
        Object.assign(e, { current: 0, pageSize: 10, total: 0 });
    }),
      u();
    var n, i, o, c;
    function a() {
      document.querySelector(".spinner").style.display = "block";
    }
    function r() {
      document.querySelector(".next-page-text").style.display = "none";
    }
    function u() {
      Object.assign(e, {
        current: e.current + 1,
        pageSize: 10,
        total: e.total,
      });
      setTimeout(function () {
        for (var t = 0; t < e.pageSize; t++)
          e.total++,
            Array.prototype.forEach.call(
              s({
                title: "今天是第".concat(e.total, "天"),
                text: "今天是第".concat(
                  e.total,
                  "天,天气不错,去吃火锅还是烧烤呢？"
                ),
                src:
                  ((n = void 0),
                  (n = [
                    "https://t7.baidu.com/it/u=2291349828,4144427007&fm=193&f=GIF",
                    "https://t7.baidu.com/it/u=1819248061,230866778&fm=193&f=GIF",
                    "https://t7.baidu.com/it/u=1092574912,855301095&fm=193&f=GIF",
                    "https://t7.baidu.com/it/u=376303577,3502948048&fm=193&f=GIF",
                    "https://t7.baidu.com/it/u=810585695,3039658333&fm=193&f=GIF",
                    "https://t7.baidu.com/it/u=1700588201,792130339&fm=193&f=GIF",
                    "https://t7.baidu.com/it/u=2671101745,1413589787&fm=193&f=GIF",
                    "https://t7.baidu.com/it/u=2869268957,1721811479&fm=193&f=GIF",
                    "https://t7.baidu.com/it/u=1557229360,443641844&fm=193&f=GIF",
                    "https://t7.baidu.com/it/u=3078295664,4026667001&fm=193&f=GIF",
                    "https://t7.baidu.com/it/u=805456074,3405546217&fm=193&f=GIF",
                    "https://t7.baidu.com/it/u=3069651952,3707858927&fm=193&f=GIF",
                    "https://t7.baidu.com/it/u=3902551096,3717324701&fm=193&f=GIF",
                    "https://t7.baidu.com/it/u=4139900776,3950105079&fm=193&f=GIF",
                    "https://t7.baidu.com/it/u=3990204032,3996447558&fm=193&f=GIF",
                    "https://t7.baidu.com/it/u=3876201379,2104650373&fm=193&f=GIF",
                  ]),
                  n[Math.floor(Math.random() * n.length)]),
              }),
              function (t) {
                document.querySelector(".scroll").appendChild(t), l();
              }
            );
        var n;
        (document.querySelector(".spinner").style.display = "none"),
          (document.querySelector(".next-page-text").style.display = "block"),
          console.log(
            "当前第".concat(e.current, "页数,共").concat(e.total, "条数据")
          );
      }, 1500);
    }
    function l() {
      var t = window.document.createEvent("UIEvents");
      t.initUIEvent("scroll", !0, !1, window, 0), window.dispatchEvent(t);
    }
    function s(t) {
      var e = t.title,
        n = t.text,
        i = t.src,
        o = document.createElement("div");
      return (
        (o.innerHTML =
          '\n        <div class="result-item-fullbox">\n            <div class="result-item">\n                <div class="result-item-content">\n                    <div class="result-item-content-title">'
            .concat(
              e,
              '</div>\n                    <div class="result-item-content-text">'
            )
            .concat(
              n,
              '</div>\n                </div>\n                <div class="result-item-img skeleton">\n                    <img lazy="true" data-src="'
            )
            .concat(
              i,
              '">\n                </div>\n                <div class="result-item-date">4周前</div>\n            </div>\n        </div>'
            )),
        o.children
      );
    }
    window.addEventListener(
      "scroll",
      ((n = function () {
        var t = document.querySelectorAll("img[lazy]");
        Array.prototype.forEach.call(t, function (t, e) {
          var n = t.dataset.src;
          if ("" !== n) {
            var i = t.getBoundingClientRect();
            if (
              i.bottom >= 0 &&
              i.top < document.documentElement.clientHeight
            ) {
              var o = new Image();
              (o.src = n),
                (o.onload = function () {
                  (t.src = o.src),
                    t.removeAttribute("lazy"),
                    (t.style.opacity = "1"),
                    t.parentElement.classList.remove("skeleton"),
                    (o = null);
                });
            }
          }
        });
      }),
      (i = 100),
      function () {
        for (var t = arguments.length, e = new Array(t), a = 0; a < t; a++)
          e[a] = arguments[a];
        var r = Date.now(),
          u = this;
        if ((c || (c = r), clearTimeout(o), r - c > i))
          return (c = r), n.apply(u, e), void clearTimeout(o);
        o = setTimeout(function () {
          (c = Date.now()), (o = null), n.apply(u, e);
        }, i);
      })
    ),
      document
        .querySelector(".next-page")
        .addEventListener("click", function () {
          r(), a(), u();
        });
  });
</script>
